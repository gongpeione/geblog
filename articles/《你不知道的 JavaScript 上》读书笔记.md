# 《你不知道的 JavaScript 上》读书笔记

记录一下这本书里的需要注意的内容，以便以后查询

# 作用域和闭包

## 作用域是什么

简单来说，作用域就是程序在执行时，寻找变量的场所。通过作用域，程序在需要变量的时候就可以很方便的找到变量以及它对应的值。

在这里简单带过一部分编译原理的知识，这部分我不太懂，就主要引用书里的内容。

在传统编译语言（就是指那些需要编译之后才可以执行的语言）中，程序源代码在执行之前需要经历三个步骤（编译）。

1. 分词/此法分析 (Tokenizing/Lexing)
2. 解析/语法分析 (Parsing
3. 代码生成

1、分词/此法分析

> 这个过程会将由字符组成的字符串分解成(对编程语言来说)有意义的代码块，这些代 码块被称为词法单元(token)。

例如 `var a = 2` 通常会被分解成 `var`, `a`, `=`, `2`, `;`。空格加不加进来取决于语言中空格是否有意义。

2、解析/语法分析

> 这个过程是将词法单元流(数组)转换成一个由元素逐级嵌套所组成的代表了程序语法 结构的树。这个树被称为“抽象语法树”(Abstract Syntax Tree，AST)。

附一个维基百科上的 AST 图：

![](https://ww4.sinaimg.cn/large/006tKfTcgy1fde2dla7gij30m80p3wh2.jpg)

> An abstract syntax tree for the following code for the Euclidean algorithm:
> ```
> while b ≠ 0
> 	if a > b
> 		a := a − b
> 	else
> 		b := b − a
> return a
> ```


3、代码生成

代码生成就是指把上一个步骤转换出的 AST 再转换成当前平台下的可执行代码。



而 JavaScript 引擎要比以上所说的三个步骤的编译器要复杂的多。JavaScript 引擎会对代码做很多运行性能上的优化。JavaScript 通常就在代码执行前对代码进行编译。


